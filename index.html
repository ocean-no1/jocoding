<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÎèôÌñâÎ≥µÍ∂å AI ÌÜµÍ≥Ñ Î∂ÑÏÑù ÏÑúÎπÑÏä§</title>
    <link rel="stylesheet" as="style" crossorigin
        href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css" />
    <link rel="stylesheet" href="css/common.css">
    <style>
        /* Main page specific styles */
        .lottery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }

        .lottery-card {
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .lottery-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
            border-color: var(--primary-blue);
        }

        .lottery-logo {
            text-align: center;
            margin-bottom: 20px;
        }

        .lottery-logo img {
            max-width: 200px;
            height: auto;
        }

        .lottery-round {
            text-align: center;
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 8px;
        }

        .lottery-date {
            text-align: center;
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-bottom: 20px;
        }

        .lottery-numbers {
            margin: 20px 0;
        }

        .lottery-prize {
            text-align: center;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid var(--border);
        }

        .prize-label {
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-bottom: 5px;
        }

        .prize-amount {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--primary-orange);
        }

        .lottery-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .lottery-actions button {
            flex: 1;
        }

        .nav-arrows {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.9);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: all 0.2s;
        }

        .nav-arrows:hover {
            background: white;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .nav-left {
            left: 10px;
        }

        .nav-right {
            right: 10px;
        }

        .pension-numbers-display {
            text-align: center;
        }

        .pension-section {
            margin: 15px 0;
        }

        .pension-section-label {
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-bottom: 8px;
        }

        @media (max-width: 768px) {
            .lottery-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <!-- Header -->
    <div class="header">
        <h1>üéØ Ï∂îÏ≤®Ïãù Î≥µÍ∂å</h1>
    </div>

    <!-- Main Container -->
    <div class="container">
        <div class="lottery-grid">
            <!-- Lotto 6/45 Card -->
            <div class="lottery-card" onclick="location.href='lotto.html'">
                <div class="lottery-logo">
                    <img src="lotto_logo.png" alt="Î°úÎòê 6/45">
                </div>
                <div class="lottery-round" id="lotto-round">1207Ìöå</div>
                <div class="lottery-date" id="lotto-date">2026.01.17</div>
                <div class="lottery-numbers">
                    <div class="balls-container" id="lotto-numbers">
                        <div class="loading">
                            <div class="spinner"></div>
                            <p>ÏµúÏã† ÎãπÏ≤®Î≤àÌò∏Î•º Î∂àÎü¨Ïò§Îäî Ï§ë...</p>
                        </div>
                    </div>
                </div>
                <div class="lottery-prize">
                    <div class="prize-label">1Îì± ÎãπÏ≤®Í∏à</div>
                    <div class="prize-amount" id="lotto-prize">294.6ÏñµÏõê</div>
                </div>
                <div class="lottery-actions">
                    <button class="btn-secondary">Ï∂îÏ≤®Í≤∞Í≥º ÏÉÅÏÑ∏</button>
                    <button class="btn-primary">Î∞îÎ°úÍµ¨Îß§</button>
                </div>
            </div>

            <!-- Pension 720+ Card -->
            <div class="lottery-card" onclick="location.href='pension.html'">
                <div class="lottery-logo">
                    <img src="pension_logo.png" alt="Ïó∞Í∏àÎ≥µÍ∂å 720+">
                </div>
                <div class="lottery-round" id="pension-round">298Ìöå</div>
                <div class="lottery-date" id="pension-date">2026.01.15</div>
                <div class="lottery-numbers pension-numbers-display">
                    <div class="pension-section">
                        <div class="pension-section-label">1Îì±</div>
                        <div id="pension-numbers-1">
                            <div class="loading">
                                <div class="spinner"></div>
                                <p>ÏµúÏã† ÎãπÏ≤®Î≤àÌò∏Î•º Î∂àÎü¨Ïò§Îäî Ï§ë...</p>
                            </div>
                        </div>
                    </div>
                    <div class="pension-section">
                        <div class="pension-section-label">Î≥¥ÎÑàÏä§</div>
                        <div id="pension-numbers-bonus"></div>
                    </div>
                </div>
                <div class="lottery-prize">
                    <div class="prize-label">1Îì± ÎãπÏ≤®Í∏à</div>
                    <div class="prize-amount" id="pension-prize">Ïõî 700ÎßåÏõê √ó 20ÎÖÑ</div>
                </div>
                <div class="lottery-actions">
                    <button class="btn-secondary">Ï∂îÏ≤®Í≤∞Í≥º ÏÉÅÏÑ∏</button>
                    <button class="btn-primary">Î∞îÎ°úÍµ¨Îß§</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div class="footer">
        <p>Î≥∏ ÏÑúÎπÑÏä§Îäî ÌÜµÍ≥Ñ Î∂ÑÏÑù Í∏∞Î∞òÏùò Ï∞∏Í≥†Ïö© ÏÑúÎπÑÏä§ÏûÖÎãàÎã§. ÎãπÏ≤®ÏùÑ Î≥¥Ïû•ÌïòÏßÄ ÏïäÏäµÎãàÎã§.</p>
        <p>¬© 2026 AI ÌÜµÍ≥Ñ Î∂ÑÏÑù ÏÑúÎπÑÏä§ | ÎèôÌñâÎ≥µÍ∂å Í≥µÏãù ÏÇ¨Ïù¥Ìä∏: <a href="https://dhlottery.co.kr" target="_blank"
                style="color: var(--primary-blue);">dhlottery.co.kr</a></p>
    </div>

    <script src="js/common.js"></script>
    <script>
        // Fetch latest lotto draw
        async function fetchLatestLottoDraw() {
            const latestDrawNo = calculateLatestDrawNo();
            console.log('üéØ Fetching latest lotto draw:', latestDrawNo);

            try {
                const url = `https://www.dhlottery.co.kr/common.do?method=getLottoNumber&drwNo=${latestDrawNo}`;
                const proxyUrl = CORS_PROXY + encodeURIComponent(url);

                const response = await fetch(proxyUrl);
                const data = await response.json();

                if (data.returnValue === 'success') {
                    displayLatestLotto(data);
                } else {
                    // Try previous draw
                    const prevUrl = `https://www.dhlottery.co.kr/common.do?method=getLottoNumber&drwNo=${latestDrawNo - 1}`;
                    const prevResponse = await fetch(CORS_PROXY + encodeURIComponent(prevUrl));
                    const prevData = await prevResponse.json();

                    if (prevData.returnValue === 'success') {
                        displayLatestLotto(prevData);
                    }
                }
            } catch (error) {
                console.error('‚ùå Failed to fetch lotto data:', error);
                document.getElementById('lotto-numbers').innerHTML = `
                    <p style="color: var(--text-muted); font-size: 0.9rem;">
                        ÏµúÏã† ÎãπÏ≤®Î≤àÌò∏Î•º Î∂àÎü¨Ïò¨ Ïàò ÏóÜÏäµÎãàÎã§.
                    </p>`;
            }
        }

        function displayLatestLotto(data) {
            const numbers = [data.drwtNo1, data.drwtNo2, data.drwtNo3, data.drwtNo4, data.drwtNo5, data.drwtNo6];
            const bonus = data.bnusNo;

            document.getElementById('lotto-round').textContent = `${data.drwNo}Ìöå`;
            document.getElementById('lotto-date').textContent = data.drwNoDate;

            const html = `
                ${renderBalls(numbers, false)}
                <span style="margin: 0 10px; color: var(--text-muted); font-size: 1.2rem;">+</span>
                ${createBallHTML(bonus, false)}
            `;

            document.getElementById('lotto-numbers').innerHTML = html;

            // Calculate prize amount
            const firstPrize = data.firstWinamnt;
            if (firstPrize) {
                const prizeInBillion = (firstPrize / 100000000).toFixed(1);
                document.getElementById('lotto-prize').textContent = `${prizeInBillion}ÏñµÏõê`;
            }
        }

        // Fetch latest pension draw (placeholder - actual implementation would scrape or use API)
        async function fetchLatestPensionDraw() {
            // For now, display placeholder data
            // In production, this would scrape the pension lottery page
            document.getElementById('pension-numbers-1').innerHTML = `
                <div class="pension-number">
                    <div class="pension-group">3Ï°∞</div>
                    <div class="pension-digit">0</div>
                    <div class="pension-digit">9</div>
                    <div class="pension-digit">6</div>
                    <div class="pension-digit">0</div>
                    <div class="pension-digit">2</div>
                    <div class="pension-digit">1</div>
                </div>
            `;

            document.getElementById('pension-numbers-bonus').innerHTML = `
                <div class="pension-number">
                    <div class="pension-digit">4</div>
                    <div class="pension-digit">9</div>
                    <div class="pension-digit">2</div>
                    <div class="pension-digit">8</div>
                    <div class="pension-digit">4</div>
                    <div class="pension-digit">5</div>
                </div>
            `;
        }

        // Initialize on load
        window.addEventListener('DOMContentLoaded', () => {
            fetchLatestLottoDraw();
            fetchLatestPensionDraw();
        });
    </script>
</body>

</html>