<!DOCTYPE html>
<html lang="ko">

<head>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <!-- Microsoft Clarity -->
    <script type="text/javascript">
        (function (c, l, a, r, i, t, y) {
            c[a] = c[a] || function () { (c[a].q = c[a].q || []).push(arguments) };
            t = l.createElement(r); t.async = 1; t.src = "https://www.clarity.ms/tag/" + i;
            y = l.getElementsByTagName(r)[0]; y.parentNode.insertBefore(t, y);
        })(window, document, "clarity", "script", "v5iipvten3");
    </script>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-VZLKFEGD77"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-VZLKFEGD77');
    </script>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5482753613081557"
        crossorigin="anonymous"></script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì£¼ë³€ ëª…ë‹¹ ì°¾ê¸° - 1ë“± íŒë§¤ì  ì§€ë„</title>
    <meta name="description" content="ë‚´ ì£¼ë³€ì˜ ë¡œë˜ 1ë“± ë‹¹ì²¨ íŒë§¤ì ì„ ì§€ë„ì—ì„œ ì°¾ì•„ë³´ì„¸ìš”.">
    <link rel="stylesheet" as="style" crossorigin
        href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css" />
    <!-- Kakao Map API -->
    <script type="text/javascript"
        src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=8c78a44cbc45fec0aa35705516f1a082&libraries=services,clusterer"></script>

    <!-- Utility Scripts -->
    <script src="js/utils.js?v=20260122_fix3"></script>
    <script src="js/lotto-enhanced.js?v=20260122_fix3"></script>
    <style>
        .map-container {
            width: 100%;
            height: 100vh;
            position: relative;
        }

        #map {
            width: 100%;
            height: 100%;
        }

        .map-header {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 100;
            background: white;
            padding: 15px 30px;
            border-radius: 50px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .map-header h1 {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary-blue);
            margin: 0;
        }

        .search-box {
            position: absolute;
            top: 100px;
            left: 20px;
            z-index: 100;
            background: white;
            padding: 20px;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            width: 320px;
        }

        .search-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
            margin-bottom: 10px;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary-blue);
        }

        .search-btn {
            width: 100%;
            padding: 12px;
            background: var(--primary-blue);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .search-btn:hover {
            background: var(--primary-orange);
        }

        .my-location-btn {
            position: absolute;
            bottom: 120px;
            right: 20px;
            z-index: 100;
            width: 50px;
            height: 50px;
            background: white;
            border: none;
            border-radius: 50%;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .my-location-btn:hover {
            background: var(--primary-blue);
            color: white;
            transform: scale(1.1);
        }

        .store-info-box {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 100;
            background: white;
            padding: 20px 25px;
            border-radius: 16px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
            min-width: 350px;
            display: none;
        }

        .store-info-box.active {
            display: block;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from {
                transform: translate(-50%, 100px);
                opacity: 0;
            }

            to {
                transform: translateX(-50%);
                opacity: 1;
            }
        }

        .store-name {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary-blue);
            margin-bottom: 8px;
        }

        .store-address {
            font-size: 0.95rem;
            color: var(--text-muted);
            margin-bottom: 12px;
        }

        .store-wins {
            display: flex;
            gap: 15px;
            margin-top: 12px;
        }

        .win-badge {
            padding: 8px 15px;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .win-badge.first {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: white;
        }

        .win-badge.second {
            background: linear-gradient(135deg, #C0C0C0 0%, #A8A8A8 100%);
            color: white;
        }

        .close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--text-muted);
            cursor: pointer;
        }

        .back-button {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 100;
            padding: 12px 20px;
            background: white;
            border: 2px solid var(--primary-blue);
            color: var(--primary-blue);
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .back-button:hover {
            background: var(--primary-blue);
            color: white;
        }

        .legend {
            position: absolute;
            bottom: 20px;
            left: 20px;
            z-index: 100;
            background: white;
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .legend-title {
            font-size: 0.9rem;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 5px;
            font-size: 0.85rem;
        }

        .legend-marker {
            width: 20px;
            height: 20px;
            border-radius: 50%;
        }

        .marker-gold {
            background: #FFD700;
        }

        .marker-silver {
            background: #C0C0C0;
        }

        .marker-normal {
            background: #4A90E2;
        }

        #roadview {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 9999;
            display: none;
        }

        .roadview-close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 201;
            padding: 12px 20px;
            background: white;
            border: 2px solid var(--primary-blue);
            color: var(--primary-blue);
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        /* Custom Zoom Control */
        .zoom-control {
            position: absolute;
            bottom: 190px;
            right: 20px;
            z-index: 100;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .zoom-btn {
            width: 50px;
            height: 50px;
            background: white;
            border: none;
            border-radius: 50%;
            font-size: 1.5rem;
            font-weight: 600;
            color: #1F2937;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .zoom-btn:hover {
            background: var(--primary-blue);
            color: white;
            transform: scale(1.1);
        }

        /* Click Coordinate Result */
        .click-result {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.95);
            padding: 10px 20px;
            border-radius: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            z-index: 100;
            font-size: 0.9rem;
            font-weight: 600;
            color: #1F2937;
            display: none;
            /* Initially hidden */
        }

        .zoom-control {
            position: absolute;
            bottom: 190px;
            right: 20px;
            z-index: 100;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .zoom-btn {
            width: 50px;
            height: 50px;
            background: white;
            border: none;
            border-radius: 50%;
            font-size: 1.5rem;
            font-weight: 600;
            color: #1F2937;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .zoom-btn:hover {
            background: var(--primary-blue);
            color: white;
            transform: scale(1.1);
        }

        .roadview-close-btn:hover {
            background: var(--primary-blue);
            color: white;
        }

        @media (max-width: 768px) {
            .search-box {
                width: calc(100% - 40px);
                left: 20px;
                right: 20px;
            }

            .store-info-box {
                min-width: auto;
                width: calc(100% - 40px);
            }

            .map-header h1 {
                font-size: 1.1rem;
            }
        }

        /* Custom Overlay Style */
        .custom-overlay {
            position: relative;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            padding: 15px;
            min-width: 260px;
            border: 1px solid #E2E8F0;
        }

        .custom-overlay::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            border-top: 10px solid white;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
        }

        .overlay-close {
            position: absolute;
            top: 10px;
            right: 10px;
            border: none;
            background: none;
            color: #94A3B8;
            cursor: pointer;
            font-size: 1.2rem;
            padding: 0;
            line-height: 1;
        }

        .overlay-close:hover {
            color: #1F2937;
        }

        /* Roadview Controls */
        .roadview-controls {
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 201;
            display: flex;
            gap: 8px;
        }

        .rv-btn {
            padding: 8px 12px;
            background: white;
            border: 1px solid #cbd5e1;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: 600;
            color: #1e293b;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: all 0.2s;
            text-decoration: none;
            display: flex;
            align-items: center;
        }

        .rv-btn:hover {
            background: #f1f5f9;
            color: #0f172a;
        }

        /* Roadview Controls */
        .roadview-controls {
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 201;
            /* Higher than map, same level as close button */
            display: flex;
            gap: 8px;
        }

        .rv-btn {
            padding: 8px 12px;
            background: white;
            border: 1px solid #cbd5e1;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: 600;
            color: #1e293b;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: all 0.2s;
            text-decoration: none;
            display: flex;
            align-items: center;
        }

        .rv-btn:hover {
            background: #f1f5f9;
            color: #0f172a;
        }

        /* Roadview Toggle Button - Positioned to left of standard controls */
        .roadview-control-btn {
            position: absolute;
            top: 25px;
            /* Aligned with typical map controls */
            right: 140px;
            /* Moved left to avoid overlapping with MapTypeControl */
            z-index: 100;
            padding: 8px 12px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            /* Squared corners to match standard controls */
            font-weight: 600;
            color: #1F2937;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.85rem;
            height: 38px;
        }

        .roadview-control-btn:hover {
            background: #f8f9fa;
        }

        .roadview-control-btn.active {
            background: var(--primary-blue);
            color: white;
            border-color: var(--primary-blue);
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        /* Marker Tracker Styles */
        .tracker {
            position: absolute;
            z-index: 100;
            cursor: pointer;
        }

        .balloon {
            position: absolute;
            width: 60px;
            height: 60px;
            background: url('https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/balloon.png') no-repeat;
            right: -30px;
            bottom: -30px;
        }

        .tracker .icon {
            position: absolute;
            width: 27px;
            height: 15px;
            background: url('https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/icon.png') no-repeat;
            left: -14px;
            top: -7px;
        }

        .overlay-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: #1E3A8A;
            margin-bottom: 5px;
            padding-right: 20px;
        }

        .overlay-addr {
            font-size: 0.85rem;
            color: #64748B;
            margin-bottom: 12px;
        }

        .overlay-buttons {
            display: flex;
            gap: 8px;
        }

        .overlay-btn {
            flex: 1;
            padding: 8px;
            border-radius: 6px;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
            text-decoration: none;
            border: none;
        }

        .search-results-list {
            position: absolute;
            top: 60px;
            left: 20px;
            width: 320px;
            max-height: 400px;
            overflow-y: auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            padding: 0;
            margin: 0;
            list-style: none;
            display: none;
        }

        .search-results-list li {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: background 0.2s;
        }

        .search-results-list li:hover {
            background: #f8f9fa;
        }

        .search-results-list li:last-child {
            border-bottom: none;
        }

        .search-item-title {
            font-weight: bold;
            font-size: 0.95rem;
            color: #1E3A8A;
            margin-bottom: 4px;
        }

        .search-item-addr {
            font-size: 0.85rem;
            color: #64748B;
        }

        @media (max-width: 768px) {
            .search-results-list {
                width: calc(100% - 40px);
                left: 20px;
                right: 20px;
            }
        }
    </style>
</head>

<body>
    <div class="map-container">
        <a href="index.html" class="back-button">ğŸ  í™ˆìœ¼ë¡œ</a>

        <div class="map-header">
            <h1>ğŸ—ºï¸ ì£¼ë³€ ëª…ë‹¹ ì°¾ê¸°</h1>
        </div>

        <!-- Center Address Display -->
        <div id="centerAddr"
            style="position: absolute; top: 80px; left: 20px; z-index: 10; background: rgba(255, 255, 255, 0.95); padding: 8px 12px; border-radius: 8px; font-size: 0.9rem; font-weight: 600; box-shadow: 0 2px 6px rgba(0,0,0,0.15); display: flex; align-items: center; gap: 6px; color: #374151;">
            <span style="font-size: 1.1em;">ğŸ“</span> <span id="centerAddrText">ì§€ë„ ì¤‘ì‹¬ ì£¼ì†Œ ë¡œë”© ì¤‘...</span>
        </div>

        <div class="search-box">
            <input type="text" class="search-input" id="search-input" placeholder="ì§€ì—­ëª… ì…ë ¥ (ì˜ˆ: ê°•ë‚¨êµ¬, ì‚¼ì„±ë™)"
                onkeypress="if(event.key === 'Enter') searchLocation()">
            <button class="search-btn" onclick="searchLocation()">ê²€ìƒ‰</button>
        </div>
        <ul id="search-results" class="search-results-list"></ul>

        <button class="my-location-btn" onclick="goToMyLocation()" title="ë‚´ ìœ„ì¹˜ë¡œ ì´ë™">
            ğŸ“
        </button>

        <!-- Roadview Toggle Button -->
        <button id="roadviewControl" class="roadview-control-btn" onclick="toggleRoadviewMode()">
            ğŸ“· ë¡œë“œë·° ëª¨ë“œ
        </button>

        <!-- Custom Zoom Controls -->
        <div class="zoom-control">
            <button class="zoom-btn" onclick="zoomIn()" title="í™•ëŒ€">+</button>
            <button class="zoom-btn" onclick="zoomOut()" title="ì¶•ì†Œ">-</button>
        </div>

        <!-- Click Coordinate & Zoom Level Display -->
        <div id="clickResult" class="click-result">
            ì§€ë„ë¥¼ í´ë¦­í•˜ê±°ë‚˜ í™•ëŒ€/ì¶•ì†Œí•´ë³´ì„¸ìš”
        </div>

        <div class="zoom-control">
            <button class="zoom-btn" onclick="zoomIn()" title="í™•ëŒ€">+</button>
            <button class="zoom-btn" onclick="zoomOut()" title="ì¶•ì†Œ">-</button>
        </div>

        <div class="legend">
            <div class="legend-title" onclick="filterMarkers('all')" style="cursor: pointer;" title="ì „ì²´ ë³´ê¸°">ë²”ë¡€ (ì „ì²´) â†»
            </div>
            <div class="legend-item" onclick="filterMarkers('gold')" id="legend-gold">
                <div class="legend-marker marker-gold"></div>
                <span>1ë“± ë‹¹ì²¨ì  (3íšŒ ì´ìƒ)</span>
            </div>
            <div class="legend-item" onclick="filterMarkers('silver')" id="legend-silver">
                <div class="legend-marker marker-silver"></div>
                <span>1ë“± ë‹¹ì²¨ì  (1-2íšŒ)</span>
            </div>
            <div class="legend-item" onclick="filterMarkers('normal')" id="legend-normal">
                <div class="legend-marker marker-normal"></div>
                <span>ì¼ë°˜ íŒë§¤ì </span>
            </div>
        </div>

        <div id="map"></div>

        <!-- ë¡œë“œë·° ì»¨í…Œì´ë„ˆ -->
        <div id="roadview">
            <div class="roadview-controls">
                <button class="rv-btn" onclick="closeRoadview()">ğŸ—ºï¸ ì§€ë„ ë³´ê¸°</button>
                <button class="rv-btn" onclick="resetRoadview()">â†º ì´ˆê¸°í™”</button>
                <a id="rvLink" href="#" target="_blank" class="rv-btn">ğŸŒ ì¹´ì¹´ì˜¤ë§µ</a>
            </div>
            <button class="roadview-close-btn" id="roadview-close" onclick="closeRoadview()">âœ• ë¡œë“œë·° ë‹«ê¸°</button>
        </div>

        <!-- ë²”ë¡€ (í˜¸ê°±ë…¸ë…¸ ìŠ¤íƒ€ì¼) -->
        <div style="
            position: absolute;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            padding: 15px 25px;
            border-radius: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            display: flex;
            gap: 20px;
            align-items: center;
            z-index: 100;
        ">
            <div style="display: flex; align-items: center; gap: 8px;">
                <div
                    style="width: 40px; height: 24px; background: #FFD700; border-radius: 12px; text-align: center; color: #1F2937; font-size: 0.75rem; line-height: 24px; font-weight: 700; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                    3+</div>
                <span style="font-size: 0.9rem; font-weight: 600; color: #1F2937;">1ë“± 3íšŒ ì´ìƒ ğŸ†</span>
            </div>
            <div style="display: flex; align-items: center; gap: 8px;">
                <div
                    style="width: 40px; height: 24px; background: #C0C0C0; border-radius: 12px; text-align: center; color: #1F2937; font-size: 0.75rem; line-height: 24px; font-weight: 700; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                    1-2</div>
                <span style="font-size: 0.9rem; font-weight: 600; color: #1F2937;">1ë“± 1-2íšŒ ğŸ¥ˆ</span>
            </div>
            <div style="display: flex; align-items: center; gap: 8px;">
                <div
                    style="width: 40px; height: 24px; background: #A0A0A0; border-radius: 12px; text-align: center; color: white; font-size: 0.75rem; line-height: 24px; font-weight: 700;">
                    0</div>
                <span style="font-size: 0.9rem; font-weight: 600; color: #1F2937;">ì¼ë°˜ íŒë§¤ì </span>
            </div>
        </div>

        <div class="store-info-box" id="store-info">
            <button class="close-btn" onclick="closeStoreInfo()">âœ•</button>
            <div class="store-name" id="store-name">íŒë§¤ì  ì´ë¦„</div>
            <div class="store-address" id="store-address">ì£¼ì†Œ</div>
            <div class="store-distance" id="store-distance"
                style="display:none; font-size:0.9rem; color:#2563EB; margin:5px 0 10px 0; font-weight:500;"></div>
            <div class="store-wins" id="store-wins">
                <div class="win-badge first">1ë“± 3íšŒ</div>
                <div class="win-badge second">2ë“± 7íšŒ</div>
            </div>
            <div id="store-actions" style="margin-top: 15px;"></div>
        </div>
    </div>

    <script>
        // Google Sheets API URL (Apps Script Web App)
        const SHEETS_API_URL = 'https://script.google.com/macros/s/AKfycbztxG09bbt0mNRfErtMiNwtdL8jhXk-L_HPL9Enja-iAbse7YgAkHJKUnEGmO5vmUOQ/exec';

        // ì „ì—­ ë³€ìˆ˜
        let storeData = [];
        let map;
        let markers = [];
        let clusterer; // ë§ˆì»¤ í´ëŸ¬ìŠ¤í„°ëŸ¬

        // ë¡œë“œë·° ê´€ë ¨ ë³€ìˆ˜
        let roadview = null;
        let roadviewClient = null;
        let rvResetValue = {}; // ë¡œë“œë·° ì´ˆê¸°í™” ê°’ ì €ì¥

        let isRoadviewMode = false;
        let roadviewMarker = null;
        let currentOverlay = null; // í˜„ì¬ ì—´ë¦° ì»¤ìŠ¤í…€ ì˜¤ë²„ë ˆì´ ì¶”ì ìš©
        let currentUserLocation = null; // ì‚¬ìš©ì í˜„ì¬ ìœ„ì¹˜ ì €ì¥

        function calculateDistance(lat1, lon1, lat2, lon2) {
            const R = 6371; // ì§€êµ¬ ë°˜ì§€ë¦„ (km)
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLon = (lon2 - lon1) * Math.PI / 180;
            const a =
                Math.sin(dLat / 2) * Math.sin(dLat / 2) +
                Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
                Math.sin(dLon / 2) * Math.sin(dLon / 2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
            const d = R * c; // ê±°ë¦¬ (km)

            if (d < 1) return Math.round(d * 1000) + 'm';
            return d.toFixed(1) + 'km';
        }
        // === Google Sheetsì—ì„œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ===
        async function loadStoreData() {
            try {
                console.log('ë¡œë˜ ëª…ë‹¹ ë°ì´í„° ë¡œë”© ì¤‘...');
                const response = await fetch(SHEETS_API_URL);

                if (!response.ok) {
                    throw new Error('API ì‘ë‹µ ì‹¤íŒ¨');
                }

                storeData = await response.json();
                console.log('âœ… ë°ì´í„° ë¡œë“œ ì™„ë£Œ:', storeData.length, 'ê°œ íŒë§¤ì ');

                return storeData;
            } catch (error) {
                console.warn('âš ï¸ API ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨, Fallback ë°ì´í„° ì‚¬ìš©:', error);
                storeData = getFallbackData();
                return storeData;
            }
        }

        // === Fallback ë°ì´í„° (API ì‹¤íŒ¨ ì‹œ ì‚¬ìš©) ===
        function getFallbackData() {
            return [
                {
                    name: "ì‚¼ì„±ëŒ€ë°•ë³µê¶Œë°©",
                    address: "ì„œìš¸ ê°•ë‚¨êµ¬ ë´‰ì€ì‚¬ë¡œ74ê¸¸ 13 101í˜¸",
                    lat: 37.5089,
                    lng: 127.0533,
                    first: 3,
                    second: 7
                },
                {
                    name: "ë¡œë˜ë°±í™”ì ",
                    address: "ì„œìš¸ ì„œì´ˆêµ¬ ê°•ë‚¨ëŒ€ë¡œ 27",
                    lat: 37.5000,
                    lng: 127.0152,
                    first: 4,
                    second: 8
                },
                {
                    name: "í™©ê¸ˆì†ë³µê¶Œ",
                    address: "ì„œìš¸ ì†¡íŒŒêµ¬ ì˜¬ë¦¼í”½ë¡œ35ë‹¤ê¸¸ 42",
                    lat: 37.5144,
                    lng: 127.1060,
                    first: 2,
                    second: 4
                },
                {
                    name: "í–‰ìš´ë³µê¶Œë°©",
                    address: "ì„œìš¸ ì˜ë“±í¬êµ¬ ì—¬ì˜ëŒ€ë¡œ 108",
                    lat: 37.5219,
                    lng: 126.9245,
                    first: 1,
                    second: 3
                }
            ];
        }

        // ì§€ë„ ì´ˆê¸°í™” (Kakao API í‚¤ í•„ìš”)
        async function initMap() {
            // ë¨¼ì € ë°ì´í„° ë¡œë“œ
            await loadStoreData();

            // Kakao APIê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ì„ ê²½ìš°ë¥¼ ëŒ€ë¹„í•œ í´ë°±
            if (typeof kakao === 'undefined' || typeof kakao.maps === 'undefined') {
                console.error('Kakao Maps API not loaded');
                alert('ì§€ë„ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
                showSimpleMap();
                return;
            }

            try {
                const container = document.getElementById('map');
                const options = {
                    center: new kakao.maps.LatLng(37.5089, 127.0533), // ì„œìš¸ ê°•ë‚¨
                    level: 5
                };

                map = new kakao.maps.Map(container, options);

                // === ì§€ë„ íƒ€ì… ì»¨íŠ¸ë¡¤ ì¶”ê°€ (ì§€ë„/ìŠ¤ì¹´ì´ë·°) ===
                const mapTypeControl = new kakao.maps.MapTypeControl();
                map.addControl(mapTypeControl, kakao.maps.ControlPosition.TOPRIGHT);

                // íŒë§¤ì  ë§ˆì»¤ í‘œì‹œ
                displayStores();

                // ì˜ì—­ ë³€ê²½ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
                initBoundsListener();

                // === 2. í´ë¦­ ì´ë²¤íŠ¸ ë“±ë¡ ===
                // ì§€ë„ë¥¼ í´ë¦­í•œ ìœ„ì¹˜ì— í‘œì¶œí•  ë§ˆì»¤ì…ë‹ˆë‹¤
                const clickMarker = new kakao.maps.Marker({
                    position: map.getCenter()
                });
                clickMarker.setMap(map);
                clickMarker.setVisible(false); // ì´ˆê¸°ì—ëŠ” ìˆ¨ê¹€

                kakao.maps.event.addListener(map, 'click', function (mouseEvent) {
                    const latlng = mouseEvent.latLng;

                    // ë¡œë“œë·° ëª¨ë“œì¼ ê²½ìš°
                    if (isRoadviewMode) {
                        if (roadviewMarker) {
                            roadviewMarker.setPosition(latlng);
                        }
                        showRoadview(latlng.getLat(), latlng.getLng());
                        return;
                    }

                    // í´ë¦­í•œ ìœ„ë„, ê²½ë„ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤ 

                    // ë§ˆì»¤ ìœ„ì¹˜ë¥¼ í´ë¦­í•œ ìœ„ì¹˜ë¡œ ì˜®ê¹ë‹ˆë‹¤
                    clickMarker.setPosition(latlng);
                    clickMarker.setVisible(true);

                    const message = 'í´ë¦­í•œ ìœ„ì¹˜: ìœ„ë„ ' + latlng.getLat().toFixed(6) + ', ê²½ë„ ' + latlng.getLng().toFixed(6);

                    const resultDiv = document.getElementById('clickResult');
                    resultDiv.innerHTML = message;
                    resultDiv.style.display = 'block';
                });

                // === 3. ì¤Œ ë³€ê²½ ì´ë²¤íŠ¸ ë“±ë¡ ===
                kakao.maps.event.addListener(map, 'zoom_changed', function () {
                    const level = map.getLevel();
                    const message = 'í˜„ì¬ ì§€ë„ ë ˆë²¨ì€ ' + level + ' ì…ë‹ˆë‹¤';

                    const resultDiv = document.getElementById('clickResult');
                    resultDiv.innerHTML = message;
                    resultDiv.style.display = 'block';
                });

            } catch (error) {
                console.error('Map initialization error:', error);
                alert('ì§€ë„ ì´ˆê¸°í™” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
                showSimpleMap();
            }
        }

        // Custom Zoom Functions
        function zoomIn() {
            const level = map.getLevel();
            map.setLevel(level - 1, { animate: true });
        }

        function zoomOut() {
            const level = map.getLevel();
            map.setLevel(level + 1, { animate: true });
        }

        // ê°„ë‹¨í•œ HTML ì§€ë„ (API ëŒ€ì²´ìš©)
        function showSimpleMap() {
            document.getElementById('map').innerHTML = `
                <div style="display: flex; flex-wrap: wrap; padding: 20px; gap: 15px; overflow-y: auto;">
                    ${storeData.map(store => `
                        <div style="background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); width: calc(50% - 10px); min-width: 280px;" onclick='showStoreInfo(${JSON.stringify(store)})'>
                            <div style="font-size: 1.2rem; font-weight: 700; color: #1E3A8A; margin-bottom: 8px;">${store.name}</div>
                            <div style="font-size: 0.9rem; color: #64748B; margin-bottom: 12px;">${store.address}</div>
                            <div style="display: flex; gap: 10px;">
                                ${store.first > 0 ? `<span style="background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%); color: white; padding: 6px 12px; border-radius: 6px; font-size: 0.85rem; font-weight: 600;">1ë“± ${store.first}íšŒ</span>` : ''}
                                ${store.second > 0 ? `<span style="background: linear-gradient(135deg, #C0C0C0 0%, #A8A8A8 100%); color: white; padding: 6px 12px; border-radius: 6px; font-size: 0.85rem; font-weight: 600;">2ë“± ${store.second}íšŒ</span>` : ''}
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function displayStores() {
            // í´ëŸ¬ìŠ¤í„°ëŸ¬ ì´ˆê¸°í™”
            clusterer = new kakao.maps.MarkerClusterer({
                map: map,
                averageCenter: true,
                minLevel: 6,
                disableClickZoom: true, // í´ë¦­ ì‹œ 1ë ˆë²¨ì”© í™•ëŒ€ë¥¼ ìœ„í•´ true ì„¤ì •
                styles: [{
                    width: '53px',
                    height: '52px',
                    background: 'rgba(255, 215, 0, 0.9)',
                    borderRadius: '25px',
                    color: '#1F2937',
                    textAlign: 'center',
                    fontWeight: 'bold',
                    lineHeight: '52px',
                    fontSize: '14px'
                }]
            });

            // ë§ˆì»¤ í´ëŸ¬ìŠ¤í„°ëŸ¬ í´ë¦­ ì´ë²¤íŠ¸ ë“±ë¡
            kakao.maps.event.addListener(clusterer, 'clusterclick', function (cluster) {
                // í˜„ì¬ ì§€ë„ ë ˆë²¨ì—ì„œ 1ë ˆë²¨ í™•ëŒ€í•œ ë ˆë²¨
                var level = map.getLevel() - 1;
                // ì§€ë„ë¥¼ í´ë¦­ëœ í´ëŸ¬ìŠ¤í„°ì˜ ë§ˆì»¤ì˜ ìœ„ì¹˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í™•ëŒ€í•©ë‹ˆë‹¤
                map.setLevel(level, { anchor: cluster.getCenter() });
            });

            storeData.forEach(store => {
                const markerPosition = new kakao.maps.LatLng(store.lat, store.lng);

                // ë‹¹ì²¨ íšŸìˆ˜ì— ë”°ë¼ ë§ˆì»¤ ìƒ‰ìƒ ê²°ì •
                let balloonColor;
                if (store.first >= 3) {
                    balloonColor = '#FFD700'; // ê¸ˆìƒ‰
                } else if (store.first >= 1) {
                    balloonColor = '#C0C0C0'; // ì€ìƒ‰
                } else {
                    balloonColor = '#A0A0A0'; // íšŒìƒ‰
                }

                // SVG ë§ˆì»¤ ì´ë¯¸ì§€ ìƒì„± (í˜¸ê°±ë…¸ë…¸ ìŠ¤íƒ€ì¼)
                const svgMarker = `
                    <svg xmlns="http://www.w3.org/2000/svg" width="50" height="30" viewBox="0 0 50 30">
                        <rect x="0" y="0" width="50" height="30" rx="15" ry="15" 
                              fill="${balloonColor}" 
                              stroke="#000" 
                              stroke-width="0.5" 
                              opacity="0.95"/>
                        <text x="25" y="20" 
                              font-family="Pretendard, sans-serif" 
                              font-size="13" 
                              font-weight="700" 
                              fill="#fff" 
                              text-anchor="middle">${store.first || 0}íšŒ</text>
                    </svg>
                `;

                const markerImage = new kakao.maps.MarkerImage(
                    'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(svgMarker),
                    new kakao.maps.Size(50, 30),
                    { offset: new kakao.maps.Point(25, 15) }
                );

                // ë§ˆì»¤ ìƒì„±
                const marker = new kakao.maps.Marker({
                    position: markerPosition,
                    image: markerImage,
                    clickable: true
                });

                // ë§ˆì»¤ì— íŒë§¤ì  ì •ë³´ ì €ì¥
                marker.storeInfo = store;

                // í´ë¦­ ì´ë²¤íŠ¸
                kakao.maps.event.addListener(marker, 'click', function () {
                    // ë¡œë“œë·° ëª¨ë“œì¼ ê²½ìš° ë§ˆì»¤ í´ë¦­ ì‹œ í•´ë‹¹ ìœ„ì¹˜ì˜ ë¡œë“œë·° ì‹¤í–‰
                    if (isRoadviewMode) {
                        showRoadview(store.lat, store.lng, store.name);
                        // ë¡œë“œë·° ë§ˆì»¤ë„ í•´ë‹¹ ìœ„ì¹˜ë¡œ ì´ë™
                        if (roadviewMarker) {
                            roadviewMarker.setPosition(new kakao.maps.LatLng(store.lat, store.lng));
                        }
                        return;
                    }
                    showStoreInfoOnMap(marker.storeInfo);
                });

                markers.push(marker);
            });

            // í´ëŸ¬ìŠ¤í„°ëŸ¬ì— ë§ˆì»¤ ì¶”ê°€
            clusterer.addMarkers(markers);

            // === ìƒìœ„ ë‹¹ì²¨ì (1ë“± 3íšŒ ì´ìƒ)ì— ë§ˆì»¤ íŠ¸ë˜ì»¤ ì ìš© ===
            // 1ë“± ë‹¹ì²¨ íšŸìˆ˜ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬ í›„ ìƒìœ„ 3ê°œ ì„ íƒ
            const topStores = [...storeData].sort((a, b) => b.first - a.first).slice(0, 3);

            markers.forEach(marker => {
                // ìƒìœ„ 3ê°œ ì í¬ì— í¬í•¨ë˜ëŠ”ì§€ í™•ì¸
                const isTopStore = topStores.some(top => top.name === marker.storeInfo.name && top.lat === marker.storeInfo.lat);

                if (isTopStore) {
                    const tracker = new MarkerTracker(map, marker);
                    tracker.run();
                }
            });
        }

        function createMarkerImage(color) {
            const imageSrc = `data:image/svg+xml,%3Csvg width='30' height='40' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M15 0C6.7 0 0 6.7 0 15c0 11.25 15 25 15 25s15-13.75 15-25c0-8.3-6.7-15-15-15z' fill='${encodeURIComponent(color)}'/%3E%3Ccircle cx='15' cy='15' r='8' fill='white'/%3E%3C/svg%3E`;
            const imageSize = new kakao.maps.Size(30, 40);
            const imageOption = { offset: new kakao.maps.Point(15, 40) };

            return new kakao.maps.MarkerImage(imageSrc, imageSize, imageOption);
        }



        function closeOverlay() {
            if (currentOverlay) {
                currentOverlay.setMap(null);
                currentOverlay = null;
            }
        }

        function showStoreInfoOnMap(store) {
            // í•˜ë‹¨ íŒ¨ë„ ì—…ë°ì´íŠ¸ (ê¸°ì¡´ ê¸°ëŠ¥ ìœ ì§€)
            document.getElementById('store-name').textContent = store.name;
            document.getElementById('store-address').textContent = store.address;

            let winsHTML = '';
            if (store.first > 0) {
                winsHTML += `<div class="win-badge first">1ë“± ${store.first}íšŒ</div>`;
            }
            if (store.second > 0) {
                winsHTML += `<div class="win-badge second">2ë“± ${store.second}íšŒ</div>`;
            }
            if (store.first === 0 && store.second === 0) {
                winsHTML = '<div style="color: #64748B;">ë‹¹ì²¨ ì´ë ¥ ì§‘ê³„ ì¤‘</div>';
            }

            document.getElementById('store-wins').innerHTML = winsHTML;
            document.getElementById('store-info').classList.add('active');

            // ê±°ë¦¬ í‘œì‹œ ì—…ë°ì´íŠ¸
            const distanceEl = document.getElementById('store-distance');
            if (distanceEl) {
                if (currentUserLocation) {
                    const dist = calculateDistance(currentUserLocation.lat, currentUserLocation.lng, store.lat, store.lng);
                    distanceEl.innerHTML = `ğŸ“ ë‚´ ìœ„ì¹˜ì—ì„œ <strong>${dist}</strong>`;
                    distanceEl.style.display = 'block';
                } else {
                    distanceEl.style.display = 'none';
                }
            }

            // === ì»¤ìŠ¤í…€ ì˜¤ë²„ë ˆì´ ê¸°ëŠ¥ ì¶”ê°€ ===

            // ê¸°ì¡´ ì˜¤ë²„ë ˆì´ ë‹«ê¸°
            closeOverlay();

            // ì»¤ìŠ¤í…€ ì˜¤ë²„ë ˆì´ ì»¨í…ì¸  HTML
            const content = `
                <div class="custom-overlay">
                    <button class="overlay-close" onclick="closeOverlay()">âœ•</button>
                    <div class="overlay-title">${store.name}</div>
                    <div class="overlay-addr">${store.address}</div>
                    <div class="overlay-buttons">
                        <button onclick="showRoadview(${store.lat}, ${store.lng}, '${store.name}')" class="overlay-btn" style="background:#FEE500; color:#191919;">
                            ğŸ“· ë¡œë“œë·°
                        </button>
                        <a href="https://map.kakao.com/link/to/${store.name},${store.lat},${store.lng}" target="_blank" class="overlay-btn" style="background:#3B82F6; color:white;">
                            ğŸš— ê¸¸ì°¾ê¸°
                        </a>
                    </div>
                </div>
            `;

            // ì˜¤ë²„ë ˆì´ ìœ„ì¹˜
            const position = new kakao.maps.LatLng(store.lat, store.lng);

            // ì»¤ìŠ¤í…€ ì˜¤ë²„ë ˆì´ ìƒì„±
            const customOverlay = new kakao.maps.CustomOverlay({
                position: position,
                content: content,
                yAnchor: 1.15, // ë§ˆì»¤ë³´ë‹¤ ì•½ê°„ ìœ„ìª½ì— í‘œì‹œ
                zIndex: 100
            });

            // ì§€ë„ì— í‘œì‹œ
            customOverlay.setMap(map);
            currentOverlay = customOverlay;

            // === í•˜ë‹¨ íŒ¨ë„ ë²„íŠ¼ ì—…ë°ì´íŠ¸ ===
            const actionsHTML = `
                <div style="display: flex; gap: 10px; margin-bottom: 8px;">
                    <button onclick="showRoadview(${store.lat}, ${store.lng}, '${store.name}')" style="flex: 1; padding: 12px; background: #FEE500; color: #191919; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 5px; font-size: 0.95rem;">
                        ğŸ“· ë¡œë“œë·°
                    </button>
                    <a href="https://map.kakao.com/link/to/${store.name},${store.lat},${store.lng}" target="_blank" style="flex: 1; padding: 12px; background: #3B82F6; color: white; border: none; border-radius: 8px; font-weight: bold; text-align: center; text-decoration: none; display: flex; align-items: center; justify-content: center; gap: 5px; font-size: 0.95rem;">
                        ğŸš— ê¸¸ì°¾ê¸°
                    </a>
                </div>
                <div style="text-align: center;">
                    <a href="https://map.kakao.com/link/roadview/${store.lat},${store.lng}" target="_blank" style="color: #64748B; font-size: 0.85rem; text-decoration: underline; cursor: pointer;">
                        ğŸŒ ì¹´ì¹´ì˜¤ë§µì—ì„œ ë¡œë“œë·° í¬ê²Œ ë³´ê¸° (ìƒˆì°½)
                    </a>
                </div>
            `;
            document.getElementById('store-actions').innerHTML = actionsHTML;

            // ì§€ë„ ì¤‘ì‹¬ ì´ë™ ë° ì¤Œì¸ (ì‚¬ìš©ì ìš”ì²­: ì¤Œì¸ ê¸°ëŠ¥)
            map.panTo(iwPosition);
            map.setLevel(2, { animate: true });
        }

        function showStoreInfo(store) {
            showStoreInfoOnMap(store);
        }

        function closeStoreInfo() {
            document.getElementById('store-info').classList.remove('active');
        }

        function searchLocation(keyword) {
            const query = keyword || document.getElementById('search-input').value.trim();
            if (!query) {
                alert('ê²€ìƒ‰í•  ì§€ì—­ëª…ì´ë‚˜ ì¥ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”.');
                return;
            }

            const ps = new kakao.maps.services.Places();
            const listEl = document.getElementById('search-results');

            // í‚¤ì›Œë“œë¡œ ì¥ì†Œë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤
            ps.keywordSearch(query, function (data, status, pagination) {
                if (status === kakao.maps.services.Status.OK) {
                    // ê²€ìƒ‰ ê²°ê³¼ ë¦¬ìŠ¤íŠ¸ í‘œì‹œ
                    displaySearchList(data);

                    // ì²« ë²ˆì§¸ ê²°ê³¼ë¡œ ì´ë™
                    const place = data[0];
                    const coords = new kakao.maps.LatLng(place.y, place.x);
                    map.setCenter(coords);
                    map.setLevel(3);

                } else if (status === kakao.maps.services.Status.ZERO_RESULT) {
                    // í‚¤ì›Œë“œ ì‹¤íŒ¨ ì‹œ ì£¼ì†Œ ê²€ìƒ‰
                    const geocoder = new kakao.maps.services.Geocoder();
                    geocoder.addressSearch(query, function (result, addrStatus) {
                        if (addrStatus === kakao.maps.services.Status.OK) {
                            const coords = new kakao.maps.LatLng(result[0].y, result[0].x);
                            map.setCenter(coords);
                            map.setLevel(3);
                            listEl.style.display = 'none'; // ì£¼ì†Œ ê²€ìƒ‰ ì‹œ ë¦¬ìŠ¤íŠ¸ ìˆ¨ê¹€
                        } else {
                            alert('ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.');
                            listEl.style.display = 'none';
                        }
                    });
                } else {
                    alert('ê²€ìƒ‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }
            });
        }

        function displaySearchList(places) {
            const listEl = document.getElementById('search-results');
            listEl.innerHTML = '';
            listEl.style.display = 'block';

            places.slice(0, 5).forEach(place => {
                const item = document.createElement('li');
                item.innerHTML = `
                    <div class="search-item-title">${place.place_name}</div>
                    <div class="search-item-addr">${place.address_name}</div>
                `;
                item.onclick = () => {
                    const coords = new kakao.maps.LatLng(place.y, place.x);
                    map.setCenter(coords);
                    map.setLevel(3);

                    // ì„ì‹œ ë§ˆì»¤
                    const marker = new kakao.maps.Marker({
                        map: map,
                        position: coords
                    });
                    const infowindow = new kakao.maps.InfoWindow({
                        content: `<div style="padding:5px;font-size:12px;">${place.place_name}</div>`
                    });
                    infowindow.open(map, marker);
                    setTimeout(() => { marker.setMap(null); infowindow.close(); }, 3000);

                    listEl.style.display = 'none';
                };
                listEl.appendChild(item);
            });
        }


        function goToMyLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition((position) => {
                    const lat = position.coords.latitude;
                    const lng = position.coords.longitude;

                    currentUserLocation = { lat, lng }; // ìœ„ì¹˜ ì €ì¥

                    if (typeof kakao !== 'undefined' && map) {
                        const moveLatLon = new kakao.maps.LatLng(lat, lng);
                        map.setCenter(moveLatLon);
                    } else {
                        alert(`ë‚´ ìœ„ì¹˜: ${lat.toFixed(4)}, ${lng.toFixed(4)}\nì§€ë„ API ì—°ë™ í›„ ìœ„ì¹˜ ì´ë™ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.`);
                    }
                }, () => {
                    alert('ìœ„ì¹˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                });
            } else {
                alert('ì´ ë¸Œë¼ìš°ì €ëŠ” ìœ„ì¹˜ ì„œë¹„ìŠ¤ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
            }
        }

        // ë¡œë“œë·° ì´ˆê¸°í™” ë° í‘œì‹œ í•¨ìˆ˜
        function initRoadview(lat, lng) {
            showRoadview(lat, lng, null);
        }

        // ë¡œë“œë·° í‘œì‹œ í•¨ìˆ˜ (ì´ë¦„ ì¸ì ì¶”ê°€)
        function showRoadview(lat, lng, name) {
            const roadviewContainer = document.getElementById('roadview');

            // ì „ì—­ ë³€ìˆ˜ ì´ˆê¸°í™” (ì—†ìœ¼ë©´ ìƒì„±)
            if (!roadview) {
                roadview = new kakao.maps.Roadview(roadviewContainer);
                roadviewClient = new kakao.maps.RoadviewClient();
            }

            const position = new kakao.maps.LatLng(lat, lng);

            roadviewClient.getNearestPanoId(position, 50, function (panoId) {
                if (panoId) {
                    roadviewContainer.style.display = 'block';

                    roadview.setPanoId(panoId);

                    kakao.maps.event.addListener(roadview, 'init', function () {
                        // ë§ˆì»¤ ì¶”ê°€
                        const rMarker = new kakao.maps.Marker({
                            position: position,
                            map: roadview
                        });

                        // ì»¤ìŠ¤í…€ ì˜¤ë²„ë ˆì´ ì¶”ê°€ (ì´ë¦„ì´ ìˆì„ ê²½ìš°)
                        if (name) {
                            const content = `
                                <div class="custom-overlay" style="min-width:auto; padding:10px 15px; box-shadow:0 4px 12px rgba(0,0,0,0.3); border:1px solid #ddd;">
                                    <div class="overlay-title" style="margin:0; font-size:1rem; color:#1E3A8A;">${name}</div>
                                </div>
                            `;

                            const rvCustomOverlay = new kakao.maps.CustomOverlay({
                                position: position,
                                content: content,
                                yAnchor: 1.5
                            });
                            rvCustomOverlay.setMap(roadview);
                        }

                        // ë·°í¬ì¸íŠ¸ ì¡°ì •
                        const projection = roadview.getProjection();
                        const viewpoint = projection.viewpointFromCoords(rMarker.getPosition(), rMarker.getAltitude());
                        roadview.setViewpoint(viewpoint);

                        // ì´ˆê¸°í™” ê°’ ì €ì¥ (Reset ê¸°ëŠ¥ìš©)
                        rvResetValue = {
                            panoId: panoId,
                            pan: viewpoint.pan,
                            tilt: viewpoint.tilt,
                            zoom: viewpoint.zoom
                        };

                        // ì™¸ë¶€ ë§í¬ ì—…ë°ì´íŠ¸
                        const rvLink = document.getElementById('rvLink');
                        if (rvLink) {
                            rvLink.href = 'https://map.kakao.com/?panoid=' + panoId + '&pan=' + viewpoint.pan + '&tilt=' + viewpoint.tilt + '&zoom=' + viewpoint.zoom;
                        }
                    });
                } else {
                    alert('í•´ë‹¹ ìœ„ì¹˜ì˜ ë¡œë“œë·°ê°€ ì—†ìŠµë‹ˆë‹¤.');
                }
            });
        }

        // ë¡œë“œë·° ë¦¬ì…‹ í•¨ìˆ˜
        function resetRoadview() {
            if (roadview && rvResetValue.panoId) {
                roadview.setViewpoint({
                    pan: rvResetValue.pan,
                    tilt: rvResetValue.tilt,
                    zoom: rvResetValue.zoom
                });
                roadview.setPanoId(rvResetValue.panoId);
            }
        }

        // ë¡œë“œë·° ë‹«ê¸° í•¨ìˆ˜
        function closeRoadview() {
            document.getElementById('roadview').style.display = 'none';
            document.getElementById('roadview-close').style.display = 'none';
        }

        // ë¡œë“œë·° ëª¨ë“œ í† ê¸€ í•¨ìˆ˜
        function toggleRoadviewMode() {
            const btn = document.getElementById('roadviewControl');
            isRoadviewMode = !isRoadviewMode;

            if (isRoadviewMode) {
                btn.classList.add('active');
                btn.innerHTML = 'ğŸ“· ë¡œë“œë·° ì¢…ë£Œ';

                // ì§€ë„ ìœ„ì— ë¡œë“œë·° ë„ë¡œ ì˜¤ë²„ë ˆì´ ì¶”ê°€
                map.addOverlayMapTypeId(kakao.maps.MapTypeId.ROADVIEW);

                // ë§ˆì»¤ ìƒì„± (ë™ë™ì´ ìŠ¤íƒ€ì¼)
                const markImage = new kakao.maps.MarkerImage(
                    'https://t1.daumcdn.net/localimg/localimages/07/2018/pc/roadview_minimap_wk_2018.png',
                    new kakao.maps.Size(26, 46),
                    {
                        spriteSize: new kakao.maps.Size(1666, 168),
                        spriteOrigin: new kakao.maps.Point(705, 114),
                        offset: new kakao.maps.Point(13, 46)
                    }
                );

                if (!roadviewMarker) {
                    roadviewMarker = new kakao.maps.Marker({
                        image: markImage,
                        position: map.getCenter(),
                        draggable: true,
                        map: map
                    });

                    // ë§ˆì»¤ ë“œë˜ê·¸ ì¢…ë£Œ ì‹œ ë¡œë“œë·° ì‹¤í–‰
                    kakao.maps.event.addListener(roadviewMarker, 'dragend', function () {
                        const position = roadviewMarker.getPosition();
                        showRoadview(position.getLat(), position.getLng());
                    });
                } else {
                    roadviewMarker.setPosition(map.getCenter());
                    roadviewMarker.setMap(map);
                }

                // ì•ˆë‚´ ë©”ì‹œì§€ í‘œì‹œ
                const resultDiv = document.getElementById('clickResult');
                resultDiv.innerHTML = 'ì§€ë„ ìœ„ì˜ íŒŒë€ ì„ (ë„ë¡œ)ì„ í´ë¦­í•˜ê±°ë‚˜ ë§ˆì»¤ë¥¼ ì˜®ê¸°ë©´ ë¡œë“œë·°ê°€ ë³´ì…ë‹ˆë‹¤.';
                resultDiv.style.display = 'block';

            } else {
                btn.classList.remove('active');
                btn.innerHTML = 'ğŸ“· ë¡œë“œë·° ëª¨ë“œ';

                // ë¡œë“œë·° ë„ë¡œ ì˜¤ë²„ë ˆì´ ì œê±°
                map.removeOverlayMapTypeId(kakao.maps.MapTypeId.ROADVIEW);

                // ë§ˆì»¤ ì œê±°
                if (roadviewMarker) {
                    roadviewMarker.setMap(null);
                }

                document.getElementById('clickResult').style.display = 'none';
            }
        }

        // ë¡œë“œë·° ëª¨ë“œ í† ê¸€ í•¨ìˆ˜
        function toggleRoadviewMode() {
            // ... (ê¸°ì¡´ ì½”ë“œ ìƒëµ - ë³€ê²½ ì—†ìŒ, MarkerTracker ì•„ë˜ì— ì¶”ê°€í•˜ê¸° ìœ„í•´ ìœ„ì¹˜ë§Œ ì¡ìŒ) ...
            // í•˜ì§€ë§Œ multi_replaceì˜ íŠ¹ì„±ìƒ ë§ˆì§€ë§‰ chunkëŠ” íŒŒì¼ ëë¶€ë¶„ì— ì¶”ê°€í•˜ëŠ” ê²ƒì´ ì•ˆì „í•¨.
            // ì—¬ê¸°ì„œëŠ” MarkerTracker í´ë˜ìŠ¤ ì •ì˜ë¥¼ íŒŒì¼ ë§¨ ë(</body> ì§ì „)ì— ì¶”ê°€í•˜ëŠ” ì „ëµ ì‚¬ìš©.
        }

        /**
         * ì§€ë„ ì˜ì—­ ì™¸ë¶€ì— ì¡´ì¬í•˜ëŠ” ë§ˆì»¤ë¥¼ ì¶”ì í•˜ëŠ” ê¸°ëŠ¥ì„ ê°€ì§„ ê°ì²´ì…ë‹ˆë‹¤.
         * í´ë¦¬í•‘ ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•˜ì—¬ trackerì˜ ì¢Œí‘œë¥¼ êµ¬í•˜ê³  ìˆìŠµë‹ˆë‹¤.
         */
        function MarkerTracker(map, target) {
            // í´ë¦¬í•‘ì„ ìœ„í•œ outcode
            var OUTCODE = {
                INSIDE: 0, // 0b0000
                TOP: 8, //0b1000
                RIGHT: 2, // 0b0010
                BOTTOM: 4, // 0b0100
                LEFT: 1 // 0b0001
            };

            // viewport ì˜ì—­ì„ êµ¬í•˜ê¸° ìœ„í•œ bufferê°’
            var BOUNDS_BUFFER = 30;

            // í´ë¦¬í•‘ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ trackerì˜ ì¢Œí‘œë¥¼ êµ¬í•˜ê¸° ìœ„í•œ bufferê°’
            var CLIP_BUFFER = 40;

            // trakcer ì—˜ë¦¬ë¨¼íŠ¸
            var tracker = document.createElement('div');
            tracker.className = 'tracker';

            // ë‚´ë¶€ ì•„ì´ì½˜
            var icon = document.createElement('div');
            icon.className = 'icon';

            // ì™¸ë¶€ì— ìˆëŠ” targetì˜ ìœ„ì¹˜ì— ë”°ë¼ íšŒì „í•˜ëŠ” ë§í’ì„  ëª¨ì–‘ì˜ ì—˜ë¦¬ë¨¼íŠ¸
            var balloon = document.createElement('div');
            balloon.className = 'balloon';

            tracker.appendChild(balloon);
            tracker.appendChild(icon);

            map.getNode().appendChild(tracker);

            // trakerë¥¼ í´ë¦­í•˜ë©´ targetì˜ ìœ„ì¹˜ë¥¼ ì§€ë„ ì¤‘ì‹¬ìœ¼ë¡œ ì§€ì •í•˜ê³  ì˜¤ë²„ë ˆì´ í‘œì‹œ
            tracker.onclick = function () {
                map.setCenter(target.getPosition());
                setVisible(false);
                // í•´ë‹¹ ë§ˆì»¤ì˜ ì˜¤ë²„ë ˆì´ ì—´ê¸°
                if (target.storeInfo) {
                    showStoreInfoOnMap(target.storeInfo);
                }
            };

            // targetì˜ ìœ„ì¹˜ë¥¼ ì¶”ì í•˜ëŠ” í•¨ìˆ˜
            function tracking() {
                var proj = map.getProjection();

                // ì§€ë„ì˜ ì˜ì—­ì„ êµ¬í•©ë‹ˆë‹¤.
                var bounds = map.getBounds();

                // ì§€ë„ì˜ ì˜ì—­ì„ ê¸°ì¤€ìœ¼ë¡œ í™•ì¥ëœ ì˜ì—­ì„ êµ¬í•©ë‹ˆë‹¤.
                var extBounds = extendBounds(bounds, proj);

                // targetì´ í™•ì¥ëœ ì˜ì—­ì— ì†í•˜ëŠ”ì§€ íŒë‹¨í•˜ê³ 
                if (extBounds.contain(target.getPosition())) {
                    // ì†í•˜ë©´ trackerë¥¼ ìˆ¨ê¹ë‹ˆë‹¤.
                    setVisible(false);
                } else {
                    // targetì´ ì˜ì—­ ë°–ì— ìˆìœ¼ë©´ ê³„ì‚°ì„ ì‹œì‘í•©ë‹ˆë‹¤.

                    // TooltipMarkerì˜ ìœ„ì¹˜
                    var pos = proj.containerPointFromCoords(target.getPosition());

                    // ì§€ë„ ì¤‘ì‹¬ì˜ ìœ„ì¹˜
                    var center = proj.containerPointFromCoords(map.getCenter());

                    // í˜„ì¬ ë³´ì´ëŠ” ì§€ë„ì˜ ì˜ì—­ì˜ ë‚¨ì„œìª½ í™”ë©´ ì¢Œí‘œ
                    var sw = proj.containerPointFromCoords(bounds.getSouthWest());

                    // í˜„ì¬ ë³´ì´ëŠ” ì§€ë„ì˜ ì˜ì—­ì˜ ë¶ë™ìª½ í™”ë©´ ì¢Œí‘œ
                    var ne = proj.containerPointFromCoords(bounds.getNorthEast());

                    // í´ë¦¬í•‘í•  ê°€ìƒì˜ ë‚´ë¶€ ì˜ì—­ì„ ë§Œë“­ë‹ˆë‹¤.
                    var top = ne.y + CLIP_BUFFER;
                    var right = ne.x - CLIP_BUFFER;
                    var bottom = sw.y - CLIP_BUFFER;
                    var left = sw.x + CLIP_BUFFER;

                    // ê³„ì‚°ëœ ëª¨ë“  ì¢Œí‘œë¥¼ í´ë¦¬í•‘ ë¡œì§ì— ë„£ì–´ ì¢Œí‘œë¥¼ ì–»ìŠµë‹ˆë‹¤.
                    var clipPosition = getClipPosition(top, right, bottom, left, center, pos);

                    // í´ë¦¬í•‘ëœ ì¢Œí‘œë¥¼ trackerì˜ ìœ„ì¹˜ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.
                    tracker.style.top = clipPosition.y + 'px';
                    tracker.style.left = clipPosition.x + 'px';

                    // ë§í’ì„ ì˜ íšŒì „ê°ì„ ì–»ìŠµë‹ˆë‹¤.
                    var angle = getAngle(center, pos);

                    // íšŒì „ê°ì„ CSS transformì„ ì‚¬ìš©í•˜ì—¬ ì§€ì •í•©ë‹ˆë‹¤.
                    balloon.style.cssText +=
                        '-ms-transform: rotate(' + angle + 'deg);' +
                        '-webkit-transform: rotate(' + angle + 'deg);' +
                        'transform: rotate(' + angle + 'deg);';

                    // targetì´ ì˜ì—­ ë°–ì— ìˆì„ ê²½ìš° trackerë¥¼ ë…¸ì¶œí•©ë‹ˆë‹¤.
                    setVisible(true);
                }
            }

            // ìƒí•˜ì¢Œìš°ë¡œ BOUNDS_BUFFER(30px)ë§Œí¼ boundsë¥¼ í™•ì¥ í•˜ëŠ” í•¨ìˆ˜
            function extendBounds(bounds, proj) {
                var sw = proj.pointFromCoords(bounds.getSouthWest());
                var ne = proj.pointFromCoords(bounds.getNorthEast());

                sw.x -= BOUNDS_BUFFER;
                sw.y += BOUNDS_BUFFER;

                ne.x += BOUNDS_BUFFER;
                ne.y -= BOUNDS_BUFFER;

                return new kakao.maps.LatLngBounds(
                    proj.coordsFromPoint(sw), proj.coordsFromPoint(ne));
            }

            // Cohenâ€“Sutherland clipping algorithm
            function getClipPosition(top, right, bottom, left, inner, outer) {
                function calcOutcode(x, y) {
                    var outcode = OUTCODE.INSIDE;

                    if (x < left) {
                        outcode |= OUTCODE.LEFT;
                    } else if (x > right) {
                        outcode |= OUTCODE.RIGHT;
                    }

                    if (y < top) {
                        outcode |= OUTCODE.TOP;
                    } else if (y > bottom) {
                        outcode |= OUTCODE.BOTTOM;
                    }

                    return outcode;
                }

                var ix = inner.x;
                var iy = inner.y;
                var ox = outer.x;
                var oy = outer.y;

                var code = calcOutcode(ox, oy);

                while (true) {
                    if (!code) {
                        break;
                    }

                    if (code & OUTCODE.TOP) {
                        ox = ox + (ix - ox) / (iy - oy) * (top - oy);
                        oy = top;
                    } else if (code & OUTCODE.RIGHT) {
                        oy = oy + (iy - oy) / (ix - ox) * (right - ox);
                        ox = right;
                    } else if (code & OUTCODE.BOTTOM) {
                        ox = ox + (ix - ox) / (iy - oy) * (bottom - oy);
                        oy = bottom;
                    } else if (code & OUTCODE.LEFT) {
                        oy = oy + (iy - oy) / (ix - ox) * (left - ox);
                        ox = left;
                    }

                    code = calcOutcode(ox, oy);
                }

                return { x: ox, y: oy };
            }

            // ë§í’ì„ ì˜ íšŒì „ê°ì„ êµ¬í•˜ê¸° ìœ„í•œ í•¨ìˆ˜
            function getAngle(center, target) {
                var dx = target.x - center.x;
                var dy = center.y - target.y;
                var deg = Math.atan2(dy, dx) * 180 / Math.PI;

                return ((-deg + 360) % 360 | 0) + 90;
            }

            // trackerì˜ ë³´ì„/ìˆ¨ê¹€ì„ ì§€ì •í•˜ëŠ” í•¨ìˆ˜
            function setVisible(visible) {
                tracker.style.display = visible ? 'block' : 'none';
            }

            // Map ê°ì²´ì˜ 'zoom_start' ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
            function hideTracker() {
                setVisible(false);
            }

            // targetì˜ ì¶”ì ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.
            this.run = function () {
                kakao.maps.event.addListener(map, 'zoom_start', hideTracker);
                kakao.maps.event.addListener(map, 'zoom_changed', tracking);
                kakao.maps.event.addListener(map, 'center_changed', tracking);
                tracking();
            };

            // targetì˜ ì¶”ì ì„ ì¤‘ì§€í•©ë‹ˆë‹¤.
            this.stop = function () {
                kakao.maps.event.removeListener(map, 'zoom_start', hideTracker);
                kakao.maps.event.removeListener(map, 'zoom_changed', tracking);
                kakao.maps.event.removeListener(map, 'center_changed', tracking);
                setVisible(false);
            };
        }

        // --- Marker Filtering Logic ---
        function filterMarkers(type) {
            if (!clusterer || !markers.length) return;

            // Highlight selected legend item
            ['gold', 'silver', 'normal'].forEach(t => {
                const el = document.getElementById('legend-' + t);
                if (el) el.style.opacity = (type === 'all' || type === t) ? '1' : '0.4';
            });
            const titleEl = document.querySelector('.legend-title');
            if (titleEl) titleEl.style.fontWeight = type === 'all' ? 'bold' : 'normal';

            // Filter markers
            const filteredMarkers = markers.filter(marker => {
                const count = marker.storeInfo.first;
                if (type === 'all') return true;
                if (type === 'gold') return count >= 3;
                if (type === 'silver') return count >= 1 && count < 3;
                if (type === 'normal') return count === 0;
                return true;
            });

            // Update Clusterer
            clusterer.clear();
            clusterer.addMarkers(filteredMarkers);
        }

        // --- Map Utilities (Resize & Bounds) ---

        // 1. Window Resize Handler
        window.addEventListener('resize', function () {
            if (map) {
                map.relayout();
            }
        });

        // 2. Bounds Changed Handler
        function initBoundsListener() {
            const resultDiv = document.getElementById('clickResult');
            if (map && resultDiv) {
                kakao.maps.event.addListener(map, 'bounds_changed', function () {
                    const center = map.getCenter();
                    const bounds = map.getBounds();
                    const sw = bounds.getSouthWest();
                    const ne = bounds.getNorthEast();

                    const message = `
                        <div style="font-size:0.8rem; line-height:1.4;">
                            <span style="color:#2563EB;">ì¤‘ì‹¬:</span> ${center.getLat().toFixed(4)}, ${center.getLng().toFixed(4)}<br>
                            <span style="color:#666; font-size:0.75rem;">
                            ì˜ì—­: (${sw.getLat().toFixed(3)}, ${sw.getLng().toFixed(3)}) ~ <br>
                                  (${ne.getLat().toFixed(3)}, ${ne.getLng().toFixed(3)})
                            </span>
                        </div>
                    `;
                    resultDiv.innerHTML = message;
                });
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì§€ë„ ì´ˆê¸°í™”
        window.onload = function () {
            initMap();
        };
    </script>

    <!-- Guide Section -->
    <div style="background: white; padding: 60px 20px; margin-top: 20px;">
        <div style="max-width: 1000px; margin: 0 auto;">
            <h2
                style="text-align: center; font-size: 2.2rem; font-weight: 700; color: var(--primary-blue); margin-bottom: 40px;">
                ğŸ—ºï¸ ëª…ë‹¹ íŒë§¤ì  ì§€ë„ ì‚¬ìš© ê°€ì´ë“œ
            </h2>

            <div
                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; margin-bottom: 50px;">
                <div style="padding: 30px; background: #f8f9fa; border-radius: 16px; border-left: 4px solid  #FFD700;">
                    <h3 style="color: var(--primary-blue); font-size: 1.4rem; margin-bottom: 15px; font-weight: 700;">ğŸ“
                        ë§ˆì»¤ í™•ì¸í•˜ê¸°</h3>
                    <p style="font-size: 1.05rem; line-height: 1.8; color: var(--text-secondary); margin-bottom: 10px;">
                        ì§€ë„ì— í‘œì‹œëœ í’ì„  ë§ˆì»¤ë¥¼ í´ë¦­í•˜ë©´ íŒë§¤ì  ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                    </p>
                    <ul style="font-size: 1rem; line-height: 1.8; color: var(--text-secondary); padding-left: 20px;">
                        <li><strong>ê¸ˆìƒ‰ ë§ˆì»¤(3+)</strong>: 1ë“± 3íšŒ ì´ìƒ ë‹¹ì²¨ íŒë§¤ì </li>
                        <li><strong>ì€ìƒ‰ ë§ˆì»¤(1-2)</strong>: 1ë“± 1-2íšŒ ë‹¹ì²¨ íŒë§¤ì </li>
                        <li><strong>íšŒìƒ‰ ë§ˆì»¤</strong>: ì¼ë°˜ íŒë§¤ì </li>
                    </ul>
                </div>

                <div style="padding: 30px; background: #f8f9fa; border-radius: 16px; border-left: 4px solid #FEE500;">
                    <h3 style="color: var(--primary-orange); font-size: 1.4rem; margin-bottom: 15px; font-weight: 700;">
                        ğŸ“· ë¡œë“œë·° ê¸°ëŠ¥</h3>
                    <p style="font-size: 1.05rem; line-height: 1.8; color: var(--text-secondary); margin-bottom: 10px;">
                        ë§ˆì»¤ë¥¼ í´ë¦­í•˜ë©´ ë‚˜íƒ€ë‚˜ëŠ” ì¸í¬ìœˆë„ìš°ì—ì„œ "ë¡œë“œë·° ë³´ê¸°" ë²„íŠ¼ì„ í´ë¦­í•˜ë©´
                        í•´ë‹¹ íŒë§¤ì ì˜ ê±°ë¦¬ë·°ë¥¼ í˜ì´ì§€ ë‚´ì—ì„œ ë°”ë¡œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                    </p>
                    <p style="font-size: 1rem; line-height: 1.8; color: var(--text-secondary);">
                        ì‹¤ì œë¡œ íŒë§¤ì ì„ ë°©ë¬¸í•˜ê¸° ì „ì— ì£¼ë³€ í™˜ê²½ê³¼ ìœ„ì¹˜ë¥¼ ë¯¸ë¦¬ íŒŒì•…í•  ìˆ˜ ìˆì–´ ìœ ìš©í•©ë‹ˆë‹¤.
                    </p>
                </div>

                <div style="padding: 30px; background: #f8f9fa; border-radius: 16px; border-left: 4px solid #3B82F6;">
                    <h3 style="color: #667eea; font-size: 1.4rem; margin-bottom: 15px; font-weight: 700;">ğŸ” ê²€ìƒ‰ ê¸°ëŠ¥</h3>
                    <p style="font-size: 1.05rem; line-height: 1.8; color: var(--text-secondary); margin-bottom: 10px;">
                        ì™¼ìª½ ìƒë‹¨ì˜ ê²€ìƒ‰ì°½ì— ì§€ì—­ëª…ì´ë‚˜ ì¥ì†Œëª…ì„ ì…ë ¥í•˜ê³  ê²€ìƒ‰í•˜ë©´ í•´ë‹¹ ìœ„ì¹˜ë¡œ ì§€ë„ê°€ ì´ë™í•©ë‹ˆë‹¤.
                    </p>
                    <ul style="font-size: 1rem; line-height: 1.8; color: var(--text-secondary); padding-left: 20px;">
                        <li>ê²€ìƒ‰ í›„ ì£¼ë³€ 1km ì´ë‚´ì˜ ëª…ë‹¹ ë§ˆì»¤ê°€ ìë™ìœ¼ë¡œ ê°•ì¡°ë©ë‹ˆë‹¤</li>
                        <li>Enter í‚¤ë¡œë„ ê²€ìƒ‰ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤</li>
                        <li>ì˜ˆì‹œ: "ê°•ë‚¨ì—­", "ì‚¼ì„±ë™", "ì—¬ì˜ë„" ë“±</li>
                    </ul>
                </div>
            </div>

            <div
                style="background: linear-gradient(135deg, #e0f2f1 0%, #b2dfdb 100%); padding: 30px; border-radius: 12px; border-left: 5px solid #00897b; margin-bottom: 40px;">
                <h3 style="color: #00695c; font-size: 1.3rem; margin-bottom: 15px; font-weight: 700;">ğŸ’¡ ë˜‘ë˜‘í•œ í™œìš© íŒ</h3>
                <ul
                    style="font-size: 1.05rem; line-height: 2; color: var(--text-secondary); padding-left: 20px; margin: 0;">
                    <li><strong>ë‚´ ìœ„ì¹˜ ë²„íŠ¼</strong>ì„ í´ë¦­í•˜ë©´ í˜„ì¬ ìœ„ì¹˜ ì£¼ë³€ì˜ ëª…ë‹¹ì„ ë¹ ë¥´ê²Œ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤</li>
                    <li><strong>ì¤Œ ì¸/ì•„ì›ƒ</strong>ì„ í†µí•´ ë” ë„“ì€ ì§€ì—­ì˜ ëª…ë‹¹ì„ ë¹„êµí•´ë³´ì„¸ìš”</li>
                    <li><strong>í´ëŸ¬ìŠ¤í„°ë§ ê¸°ëŠ¥</strong>ìœ¼ë¡œ ì¤Œ ì•„ì›ƒ ì‹œ ì—¬ëŸ¬ ë§ˆì»¤ê°€ í•˜ë‚˜ë¡œ ê·¸ë£¹í™”ë˜ì–´ ë³´ê¸° í¸ë¦¬í•©ë‹ˆë‹¤</li>
                    <li><strong>ê¸¸ì°¾ê¸° ë²„íŠ¼</strong>ì„ í´ë¦­í•˜ë©´ ì¹´ì¹´ì˜¤ë§µ ì•±ìœ¼ë¡œ ê²½ë¡œ ì•ˆë‚´ë¥¼ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤</li>
                </ul>
            </div>

            <div
                style="background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%); padding: 30px; border-radius: 12px; border-left: 5px solid #f57c00;">
                <h3 style="color: #e65100; font-size: 1.3rem; margin-bottom: 15px; font-weight: 700;">âš ï¸ ìœ ì˜ì‚¬í•­</h3>
                <ul
                    style="font-size: 1.05rem; line-height: 2; color: var(--text-secondary); padding-left: 20px; margin: 0;">
                    <li>íŒë§¤ì ì˜ ê³¼ê±° ë‹¹ì²¨ ì´ë ¥ì€ <strong>ì°¸ê³ ìš©</strong>ì´ë©°, ë¯¸ë˜ ë‹¹ì²¨ì„ ë³´ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤</li>
                    <li>ëª¨ë“  ë³µê¶Œ íŒë§¤ì ì˜ ë‹¹ì²¨ í™•ë¥ ì€ <strong>ë™ì¼</strong>í•©ë‹ˆë‹¤</li>
                    <li>ëª…ë‹¹ ë°©ë¬¸ì€ ì¬ë¯¸ì™€ í¥ë¯¸ë¥¼ ìœ„í•œ ê²ƒì´ë©°, ê³¼ë„í•œ ê¸°ëŒ€ëŠ” ê¸ˆë¬¼ì…ë‹ˆë‹¤</li>
                    <li>ì±…ì„ ìˆëŠ” ë³µê¶Œ êµ¬ë§¤ë¥¼ ìœ„í•´ ì ì ˆí•œ ì˜ˆì‚° ê´€ë¦¬ë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤</li>
                </ul>
            </div>

            <div style="text-align: center; margin-top: 50px;">
                <h3 style="font-size: 1.8rem; font-weight: 700; color: var(--text-primary); margin-bottom: 30px;">
                    ğŸ’¬ ë” ì•Œì•„ë³´ê¸°
                </h3>
                <div style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;">
                    <a href="about.html"
                        style="text-decoration: none; padding: 15px 30px; background: var(--primary-blue); color: white; border-radius: 10px; font-weight: 600; transition: all 0.3s ease;">
                        ì„œë¹„ìŠ¤ ì†Œê°œ
                    </a>
                    <a href="guide.html"
                        style="text-decoration: none; padding: 15px 30px; background: var(--primary-orange); color: white; border-radius: 10px; font-weight: 600; transition: all 0.3s ease;">
                        ë³µê¶Œ ê°€ì´ë“œ
                    </a>
                    <a href="faq.html"
                        style="text-decoration: none; padding: 15px 30px; background: #667eea; color: white; border-radius: 10px; font-weight: 600; transition: all 0.3s ease;">
                        ìì£¼ ë¬»ëŠ” ì§ˆë¬¸
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="footer" style="position: relative; margin-top: 0;">
        <p><strong>âš ï¸ ë©´ì±… ì¡°í•­:</strong> íŒë§¤ì  ë‹¹ì²¨ ì •ë³´ëŠ” ì°¸ê³ ìš©ì´ë©°, ë‹¹ì²¨ì„ ë³´ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
        <p>
            <a href="privacy.html" style="color: white; text-decoration: underline;">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a> |
            <a href="about.html" style="color: white; text-decoration: underline;">ì„œë¹„ìŠ¤ ì†Œê°œ</a> |
            <a href="https://github.com/ocean-no1/jocoding/issues" target="_blank"
                style="color: white; text-decoration: underline;">ë¬¸ì˜í•˜ê¸°</a>
        </p>
        <p>Â© 2026 AI í†µê³„ ë¶„ì„ ì„œë¹„ìŠ¤</p>
    </div>
</body>

</html>